"$schema" = "https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json"
version = 3
final_space = true
console_title_template = "{{.Shell}} {{.Folder}}"
# async = true

[transient_prompt]
background = "transparent"
foreground_templates = [
  "{{if gt .Code 0}}1{{end}}",
  "{{if eq .Code 0}}2{{end}}",
]
template = " "

[[blocks]]
type = "prompt"
alignment = "left"
newline = true

[[blocks.segments]]
type = "os"
style = "diamond"
leading_diamond = ""
template = " {{.Icon}} "
background = "7"
foreground = "232"
powerline_symbol = ""

[[blocks.segments]]
type = "path"
template = " {{if eq .PWD \"~\"}} {{else}} {{end}}{{ path .Path .Location }} "
powerline_symbol = ""
background = "4"
foreground = "0"
style = "powerline"

[blocks.segments.properties]
style = "full"
mixed_threshold = 10
max_width = 50
folder_icon = "…"
home_icon = "~"
edge_format = "<b>%s</b>"
gitdir_format = "<b><i>%s</i></b>"

[blocks.segments.properties.mapped_locations]
"\\\\wsl$\\Ubuntu" = " "

[[blocks.segments]]
type = "git"
style = "powerline"
powerline_symbol = ""
background = "2"
foreground = "0"
background_templates = [
  "{{ if or (.Working.Changed) (.Staging.Changed) }}3{{ end }}",
  "{{ if and (gt .Ahead 0) (gt .Behind 0) }}2{{ end }}",
  "{{ if gt .Ahead 0 }}2{{ end }}",
  "{{ if gt .Behind 0 }}2{{ end }}",
]
foreground_templates = [
  "{{ if or (.Working.Changed) (.Staging.Changed) }}0{{ end }}",
  "{{ if and (gt .Ahead 0) (gt .Behind 0) }}0{{ end }}",
  "{{ if gt .Ahead 0 }}0{{ end }}",
  "{{ if gt .Behind 0 }}0{{ end }}",
]
template = " {{ url (cat .UpstreamIcon .HEAD) .UpstreamURL }}{{if .BranchStatus }} {{ .BranchStatus }}{{ end }}{{ if .Working.Changed }}  {{ .Working.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}{{ if .Staging.Changed }}  {{ .Staging.String }}{{ end }}{{ if gt .StashCount 0 }}  {{ .StashCount }}{{ end }} "

[blocks.segments.properties]
fetch_status = true
fetch_upstream_icon = true
source = "cli"
branch_icon = " "
branch_identical_icon = ""

[[blocks]]
type = "prompt"
alignment = "left"
newline = true

[[blocks.segments]]
type = "text"
style = "plain"
foreground_templates = [
  "{{if gt .Code 0}}1{{end}}",
  "{{if eq .Code 0}}2{{end}}",
]
template = "   "